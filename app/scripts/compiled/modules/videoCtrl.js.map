{"version":3,"sources":["modules/videoCtrl.js"],"names":[],"mappings":"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","file":"modules/videoCtrl.js","sourcesContent":["var ns = ns || {};\n\n(function(window, document, undefined) {\n\n    'use strict';\n\n    /**\n    * Video Controller\n    */\n    \n    ns.videoCtrl = (function(){\n\n        // App config and variables\n        var DOM = {\n            body            : document.querySelectorAll('body')[0],\n            videoPlayBtn \t: document.getElementById('cracker'),\n            vimeoEmbed \t    : document.getElementById('vimeo-container')\n        };\n        \n        var settings = {\n            data : [],\n            date : 0\n        };\n        \n        var s = settings;\n\n\n        /**\n        * @name init\n        * @desc Initialises the menu\n        */ \n        var init = function () {\n            \n            // Initialise video controller\n            DOM.body.setAttribute('ui-video-ctrl', 'is-started');\n            \n            // Get todays date\n            s.date = ns.CONST.DAY;\n            \n            // Setup video embed from google spreadsheet\n            _getVideoPath();\n        };\n\n\n        /**\n        * @name _toggleMenu\n        * @desc Toggles menu visibility\n        */   \n        var _getVideoPath = function () {\n    \n            var request = new XMLHttpRequest();\n            request.open('GET', 'https://spreadsheets.google.com/feeds/list/1PPrpZfJEgJEry1Qsk61jtXLIz_5eZBDvKXzhJWKxWz0/od6/public/values?hl=en_US&alt=json', true);\n            \n            request.onload = function() {\n                if (request.status >= 200 && request.status < 400) {\n                    var response = JSON.parse(request.response);\n                    s.data = response.feed.entry;\n                    \n                    // Populate video embed\n                    _createEmbed();\n                } else {\n                    // We reached our target server, but it returned an error\n                }\n            };\n            \n            request.onerror = function() {\n                // There was a connection error of some sort\n            };\n            \n            request.send();\n        };\n\n\n        /**\n        * @name _toggleMenu\n        * @desc Toggles menu visibility\n        */   \n        var _createEmbed = function () {\n            \n            let vimeoID;\n            \n            // Check if date exists in data source\n            if (s.data[s.date - 1] !== undefined) {\n                vimeoID = s.data[s.date - 1].gsx$id.$t;\n            }\n            \n            // If we're testing (or embed ID is empty), use the demo embed instead\n            if (ns.CONST.TEST || vimeoID === '') { vimeoID = 146790300; }\n            \n            // Add markup to DOM\n            let markup = '<iframe id=\"vimeo-embed\" src=https://player.vimeo.com/video/' + vimeoID + '?api=1 frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';\n            DOM.vimeoEmbed.insertAdjacentHTML('beforeend', markup);\n        \n            // Attach Event listener to newly created close button\n            let closeBtn = document.getElementById('video-close');\n            closeBtn.addEventListener('click', _closeVideo, false);\n        };\n\n\n        /**\n        * @name playVideo\n        * @desc Shows the video and begins playback\n        */   \n        var playVideo = function () {\n            \n            // Prepare data for Vimeo API\n            let iframe = document.getElementById('vimeo-embed');\n            let player = $f(iframe);\n            \n            player.api('play');\n            \n            // Show video container\n            DOM.body.setAttribute('ui-video', 'is-playing');\n        };\n\n\n        /**\n        * @name closeVideo\n        * @desc Shows the video and begins playback\n        */   \n        var _closeVideo = function () {\n            \n            // Prepare data for Vimeo API\n            let iframe = document.getElementById('vimeo-embed');\n            let player = $f(iframe);\n            \n            player.api('pause');\n            \n            // Hide video container\n            DOM.body.setAttribute('ui-video', 'is-finished');\n            \n            // Show cracker archive\n            ns.UI.showArchive();\n        };\n        \n        //////////////////\n\n        var module = {\n\t\t\tinit: init,\n\t\t\tplayVideo: playVideo\n        };\n\n        return module;\n    })();\n    \n})(window, document);"],"sourceRoot":"/source/"}